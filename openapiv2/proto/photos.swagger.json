{
  "swagger": "2.0",
  "info": {
    "title": "proto/photos.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "ByteService"
    },
    {
      "name": "LibraryService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/directories": {
      "get": {
        "summary": "ListDirectories lists virtual directories (common prefixes) in a bucket",
        "operationId": "LibraryService_ListDirectories",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosListDirectoriesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "prefix",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "recursive",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos": {
      "get": {
        "summary": "ListPhotos returns a paginated list of photos with optional prefix filtering",
        "operationId": "LibraryService_ListPhotos",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosListPhotosResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageToken",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "prefix",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/sync": {
      "post": {
        "summary": "SyncDatabase syncs the photo database with the storage backend",
        "operationId": "LibraryService_SyncDatabase",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/upload": {
      "post": {
        "summary": "Upload uploads a new photo",
        "operationId": "ByteService_Upload",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosUploadResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/photosUploadRequest"
            }
          }
        ],
        "tags": [
          "ByteService"
        ]
      }
    },
    "/v1/photos/{objectId}": {
      "get": {
        "summary": "GetPhoto retrieves photo metadata by ID",
        "operationId": "LibraryService_GetPhoto",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosGetPhotoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "objectId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "LibraryService"
        ]
      },
      "delete": {
        "summary": "DeletePhoto removes a photo by ID",
        "operationId": "LibraryService_DeletePhoto",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosDeletePhotoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "objectId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/{objectId}/download": {
      "get": {
        "summary": "Download retrieves a photo by ID",
        "operationId": "ByteService_Download",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosDownloadResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "objectId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ByteService"
        ]
      }
    },
    "/v1/photos/{objectId}/exists": {
      "get": {
        "summary": "PhotoExists checks if a photo exists by ID",
        "operationId": "LibraryService_PhotoExists",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosPhotoExistsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "objectId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/{objectId}/metadata": {
      "patch": {
        "summary": "UpdatePhotoMetadata updates metadata for a photo",
        "operationId": "LibraryService_UpdatePhotoMetadata",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosUpdatePhotoMetadataResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "objectId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/LibraryServiceUpdatePhotoMetadataBody"
            }
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/{objectId}/signed-url": {
      "post": {
        "summary": "GenerateSignedUrl creates a time-limited signed URL for photo access",
        "operationId": "LibraryService_GenerateSignedUrl",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosGenerateSignedUrlResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "objectId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/LibraryServiceGenerateSignedUrlBody"
            }
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/{sourceObjectId}/copy": {
      "post": {
        "summary": "CopyPhoto copies a photo to a new location",
        "operationId": "LibraryService_CopyPhoto",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosCopyPhotoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "sourceObjectId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/LibraryServiceCopyPhotoBody"
            }
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    },
    "/v1/photos/{sourceObjectId}/rename": {
      "post": {
        "summary": "RenamePhoto renames a photo by moving it to a new object ID",
        "operationId": "LibraryService_RenamePhoto",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/photosRenamePhotoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "sourceObjectId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/LibraryServiceRenamePhotoBody"
            }
          }
        ],
        "tags": [
          "LibraryService"
        ]
      }
    }
  },
  "definitions": {
    "LibraryServiceCopyPhotoBody": {
      "type": "object",
      "properties": {
        "destinationObjectId": {
          "type": "string"
        }
      },
      "title": "CopyPhotoRequest specifies source and destination for copy operation"
    },
    "LibraryServiceGenerateSignedUrlBody": {
      "type": "object",
      "properties": {
        "expirationSeconds": {
          "type": "string",
          "format": "int64"
        },
        "method": {
          "type": "string"
        }
      },
      "title": "GenerateSignedUrlRequest specifies parameters for signed URL generation"
    },
    "LibraryServiceRenamePhotoBody": {
      "type": "object",
      "properties": {
        "destinationObjectId": {
          "type": "string"
        }
      },
      "title": "RenamePhotoRequest specifies source and destination for rename operation"
    },
    "LibraryServiceUpdatePhotoMetadataBody": {
      "type": "object",
      "properties": {
        "customMetadata": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "contentType": {
          "type": "string"
        }
      },
      "title": "UpdatePhotoMetadataRequest specifies metadata updates for a photo"
    },
    "photosCopyPhotoResponse": {
      "type": "object",
      "properties": {
        "photo": {
          "$ref": "#/definitions/photosPhoto"
        }
      },
      "title": "CopyPhotoResponse returns the copied photo metadata"
    },
    "photosDeletePhotoResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        }
      },
      "title": "DeletePhotoResponse confirms deletion"
    },
    "photosDownloadResponse": {
      "type": "object",
      "properties": {
        "photo": {
          "$ref": "#/definitions/photosPhoto"
        },
        "data": {
          "type": "string",
          "format": "byte"
        }
      },
      "title": "DownloadResponse returns the photo with its data"
    },
    "photosGenerateSignedUrlResponse": {
      "type": "object",
      "properties": {
        "signedUrl": {
          "type": "string"
        },
        "expiresAt": {
          "type": "string"
        }
      },
      "title": "GenerateSignedUrlResponse returns the signed URL and expiration time"
    },
    "photosGetPhotoResponse": {
      "type": "object",
      "properties": {
        "photo": {
          "$ref": "#/definitions/photosPhoto"
        }
      },
      "title": "GetPhotoResponse returns the photo metadata"
    },
    "photosListDirectoriesResponse": {
      "type": "object",
      "properties": {
        "prefixes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "title": "ListDirectoriesResponse returns directory prefixes"
    },
    "photosListPhotosResponse": {
      "type": "object",
      "properties": {
        "photos": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/photosPhoto"
          }
        },
        "nextPageToken": {
          "type": "string"
        }
      },
      "title": "ListPhotosResponse returns a paginated list of photos"
    },
    "photosPhoto": {
      "type": "object",
      "properties": {
        "objectId": {
          "type": "string"
        },
        "filename": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "sizeBytes": {
          "type": "string",
          "format": "int64"
        },
        "createdAt": {
          "type": "string"
        },
        "updatedAt": {
          "type": "string"
        },
        "md5Hash": {
          "type": "string"
        },
        "latitude": {
          "type": "number",
          "format": "double",
          "title": "Location coordinates (decimal degrees)"
        },
        "longitude": {
          "type": "number",
          "format": "double"
        },
        "hasLocation": {
          "type": "boolean"
        },
        "dateTaken": {
          "type": "string",
          "title": "Date the photo was taken (RFC3339 format)"
        },
        "hasDateTaken": {
          "type": "boolean"
        },
        "width": {
          "type": "integer",
          "format": "int32",
          "title": "Image dimensions in pixels"
        },
        "height": {
          "type": "integer",
          "format": "int32"
        },
        "hasDimensions": {
          "type": "boolean"
        },
        "originalFilename": {
          "type": "string",
          "title": "Original filename before upload"
        },
        "cameraMake": {
          "type": "string",
          "title": "Camera make (manufacturer, e.g., \"Apple\", \"Canon\")"
        },
        "cameraModel": {
          "type": "string",
          "title": "Camera model (e.g., \"iPhone 14 Pro\", \"EOS R5\")"
        },
        "focalLength": {
          "type": "number",
          "format": "double",
          "title": "Focal length in millimeters (e.g., 50.0 for 50mm)"
        },
        "iso": {
          "type": "integer",
          "format": "int32",
          "title": "ISO sensitivity (e.g., 100, 400, 3200)"
        },
        "aperture": {
          "type": "number",
          "format": "double",
          "title": "Aperture as f-number (e.g., 2.8 for f/2.8)"
        },
        "exposureTime": {
          "type": "number",
          "format": "double",
          "title": "Exposure time in seconds (e.g., 0.001 for 1/1000s)"
        },
        "lensModel": {
          "type": "string",
          "title": "Lens model (e.g., \"EF 50mm f/1.4 USM\")"
        }
      },
      "title": "Photo represents a stored photo with metadata"
    },
    "photosPhotoExistsResponse": {
      "type": "object",
      "properties": {
        "exists": {
          "type": "boolean"
        }
      },
      "title": "PhotoExistsResponse returns whether the photo exists"
    },
    "photosPhotoMetadata": {
      "type": "object",
      "properties": {
        "filename": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        }
      },
      "title": "PhotoMetadata contains info about the photo being uploaded"
    },
    "photosRenamePhotoResponse": {
      "type": "object",
      "properties": {
        "photo": {
          "$ref": "#/definitions/photosPhoto"
        }
      },
      "title": "RenamePhotoResponse returns the renamed photo metadata"
    },
    "photosStreamingDownloadResponse": {
      "type": "object",
      "properties": {
        "metadata": {
          "$ref": "#/definitions/photosPhoto",
          "title": "metadata is sent in the first message only"
        },
        "chunk": {
          "type": "string",
          "format": "byte",
          "title": "chunk contains a portion of the photo data"
        }
      },
      "title": "StreamingDownloadResponse is streamed back in chunks"
    },
    "photosUpdatePhotoMetadataResponse": {
      "type": "object",
      "properties": {
        "photo": {
          "$ref": "#/definitions/photosPhoto"
        }
      },
      "title": "UpdatePhotoMetadataResponse returns the updated photo metadata"
    },
    "photosUploadRequest": {
      "type": "object",
      "properties": {
        "objectId": {
          "type": "string"
        },
        "contentType": {
          "type": "string"
        },
        "data": {
          "type": "string",
          "format": "byte"
        }
      },
      "title": "UploadRequest contains the photo data to upload"
    },
    "photosUploadResponse": {
      "type": "object",
      "properties": {
        "photo": {
          "$ref": "#/definitions/photosPhoto"
        }
      },
      "title": "UploadResponse returns the uploaded photo metadata"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
